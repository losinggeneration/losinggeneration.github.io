<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Z80 Assembly :: Losinggeneration&#39;s Coding and Projects</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="I&amp;rsquo;m currently learning Z80 assembly (I&amp;rsquo;ve read the book once, but now I&amp;rsquo;m actually working through the exercises.) I have to say, it&amp;rsquo;s fun and a bit challenging at times. The challenge is partly learning the tools. I&amp;rsquo;m currently using z80pack. From that I&amp;rsquo;m using z80asm and z80sim. I&amp;rsquo;ve played a bit with the cpm2&amp;amp;3sim emulator that comes with it, but I currently only really need z80sim. z80asm can be a bit strange at time (or perhaps just more strict then the book."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://losinggeneration.com/2009/11/04/z80-assembly/" />




<link rel="stylesheet" href="https://losinggeneration.com/assets/style.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://losinggeneration.com/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://losinggeneration.com/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Z80 Assembly :: Losinggeneration&#39;s Coding and Projects — " />
<meta name="twitter:description" content="I&amp;rsquo;m currently learning Z80 assembly (I&amp;rsquo;ve read the book once, but now I&amp;rsquo;m actually working through the exercises.) I have to say, it&amp;rsquo;s fun and a bit challenging at times. The challenge is partly learning the tools. I&amp;rsquo;m currently using z80pack. From that I&amp;rsquo;m using z80asm and z80sim. I&amp;rsquo;ve played a bit with the cpm2&amp;amp;3sim emulator that comes with it, but I currently only really need z80sim. z80asm can be a bit strange at time (or perhaps just more strict then the book." />
<meta name="twitter:site" content="https://losinggeneration.com/" />
<meta name="twitter:creator" content="losinggeneration" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Z80 Assembly :: Losinggeneration&#39;s Coding and Projects — ">
<meta property="og:description" content="I&amp;rsquo;m currently learning Z80 assembly (I&amp;rsquo;ve read the book once, but now I&amp;rsquo;m actually working through the exercises.) I have to say, it&amp;rsquo;s fun and a bit challenging at times. The challenge is partly learning the tools. I&amp;rsquo;m currently using z80pack. From that I&amp;rsquo;m using z80asm and z80sim. I&amp;rsquo;ve played a bit with the cpm2&amp;amp;3sim emulator that comes with it, but I currently only really need z80sim. z80asm can be a bit strange at time (or perhaps just more strict then the book." />
<meta property="og:url" content="https://losinggeneration.com/2009/11/04/z80-assembly/" />
<meta property="og:site_name" content="Z80 Assembly" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:section" content="Z80 Assembly" />
<meta property="article:published_time" content="2009-11-05 05:04:13 &#43;0000 &#43;0000" />








<link rel="stylesheet"
      href="/css/styles/gruvbox-dark.css">
<script src="/js/highlight-9.18.1.js"></script>
<script src="/js/highlightjs-zig.js"></script>
<script>
      hljs.registerLanguage('zig', window.hljsDefineZig);
      hljs.initHighlightingOnLoad();
</script>


</head>
<body class="">


<div class="container full headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    ~losinggeneration
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://losinggeneration.com/2009/11/04/z80-assembly/">Z80 Assembly</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2009-11-05
    </span>
    
    
    <span class="post-author">::
      losinggeneration
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://losinggeneration.com/tags/assembly/">Assembly</a>&nbsp;
    
    #<a href="https://losinggeneration.com/tags/z80/">Z80</a>&nbsp;
    
  </span>
  

  

  <div class="post-content"><div>
        <p>I&rsquo;m currently learning Z80 assembly (I&rsquo;ve read the book once, but now I&rsquo;m actually working through the exercises.) I have to say, it&rsquo;s fun and a bit challenging at times. The challenge is partly learning the tools. I&rsquo;m currently using z80pack. From that I&rsquo;m using z80asm and z80sim. I&rsquo;ve played a bit with the cpm2&amp;3sim emulator that comes with it, but I currently only <em>really</em> need z80sim. z80asm can be a bit strange at time (or perhaps just more strict then the book.) For instance, <code class="language-z80">LD C, (IX - 5)</code> doesn&rsquo;t work. Instead, I have to use <code lang="z80">LD C, (IX + -5)</code>Not a huge deal at all, just wasn&rsquo;t immediately apparent that I needed to add by the inverse to subtract from the register. As always, there&rsquo;s a huge difference between reading and doing. It&rsquo;s been very rewarding when I get some of these basic things working correctly. Basically I&rsquo;ve got the hang of moving values around registers and memory, addition/subtraction, using the stack, and even played around a bit with the exchange instructions. It&rsquo;s all very basic, but I&rsquo;m trying to learn it really well so when I move on to ARM, SH, PowerPC, and perhaps even x86 assembly, I&rsquo;ll have a really good base understanding and it will mainly be learning the new instruction set.</p>
<p>I&rsquo;m actually kind of glad I got this book for free from the library (on the free book shelf.) Learning on an 8-bit processor has advantages and disadvantages. One of the greatest advantages of the Z80 is that there are quite a few good emulators for it. The great thing about z80sim is after your instructions have run it gives you a printout of what&rsquo;s in the registers at HALT. You can then view the memory which you may have used for the stack, or just generally wrote to. You can then quickly clear the ram, and relatively easily clear the registers. Though, z80sim doesn&rsquo;t seem to have an quick way to reset all registers to zero. So, until I find a better way (I could just quit and restart z80sim) I&rsquo;m currently using this to reset the registers to 0 (with the exception of PC, which isn&rsquo;t a big deal)</p>
<pre><code class="language-z80" data-lang="z80">; clear the registers first
LD HL, 0
PUSH HL
POP AF ; this makes sure AF is cleared
LD SP, HL ; ditto to the SP
LD BC, 0
LD DE, 0
; these have no swapped registers
LD IX, 0
LD IY, 0
LD I, A
DI
; now clear the swapped registers
; we swap, then clear the registers again
EX AF, AF'
EXX
LD HL, 0
PUSH HL
POP AF
LD BC, 0
LD DE, 0
HALT
</code></pre><p>I hope I didn&rsquo;t make some glaring mistake (or overlook an easier way.) Anyways, it seems to work quite well with z80sim</p>
<pre><code>&gt;&gt;&gt; r clear.bin
&gt;&gt;&gt; g
&gt;&gt;&gt; f 0,ffff,0
</code></pre><p>Clears pretty much everything quite quickly. I may even dig into the code and add a reset command to do exactly this. It&rsquo;s been a lot of fun honestly. I expect to be get through at another chapter tomorrow.</p>
<h5 id="edit">edit<a href="#edit" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h5>
<p>Long term goal after learning and understanding Z80 assembly: do some Game Gear and perhaps Gameboy homebrew (probably going to be very basic.)</p>

      </div></div>
  <div class="comments">
    <div class="comments__title">
      <span class="comments__title-h">Comments</span>
      <hr />
    </div>
    <link rel="stylesheet" href="/css/styles/comments.css">
<div id="remark42"></div>
<script>
  var remark_config = {
    host: "https://comments.losinggeneration.com",
    site_id: 'remark',
    theme: 'dark',
  };

  (function(c) {
    for(var i = 0; i < c.length; i++){
      var d = document, s = d.createElement('script');
      s.src = remark_config.host + '/web/' +c[i] +'.js';
      s.defer = true;
      (d.head || d.body).appendChild(s);
    }
  })(remark_config.components || ['embed']);
</script>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <span class="button previous">
        <a href="https://losinggeneration.com/2009/11/22/crabemu/">
          <span class="button__icon">←</span>
          <span class="button__text">CrabEmu</span>
        </a>
      </span>
      
      
      <span class="button next">
        <a href="https://losinggeneration.com/2009/10/25/arch-linux-ppc-kdelibs/">
          <span class="button__text">Arch Linux PPC KDELibs</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">
        <span>©2009-2022 Harley Laue</span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://losinggeneration.com/assets/main.js"></script>
<script src="https://losinggeneration.com/assets/prism.js"></script>





  
</div>

</body>
</html>
